<!DOCTYPE html>  <html> <head>   <title>backbone-validation.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" />   <script type="text/javascript">     var _gaq = _gaq || [];     _gaq.push(['_setAccount', 'UA-12325477-1']);     _gaq.push(['_trackPageview']);      (function() {       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);     })();   </script> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               backbone-validation.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Backbone.Validation v0.7.1</p>

<p>Copyright (c) 2011-2012 Thomas Pedersen
Distributed under MIT License</p>

<p>Documentation and full license available at:
http://thedersen.com/projects/backbone-validation</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Validation</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">){</span>
  <span class="s1">&#39;use strict&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Default options</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">defaultOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">forceUpdate</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span>
    <span class="nx">labelFormatter</span><span class="o">:</span> <span class="s1">&#39;sentenceCase&#39;</span><span class="p">,</span>
    <span class="nx">valid</span><span class="o">:</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span>
    <span class="nx">invalid</span><span class="o">:</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h2>Helper functions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Formatting functions used for formatting error messages</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">formatFunctions</span> <span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Uses the configured label formatter to format the attribute name
to make it more readable for the user</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">formatLabel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attrName</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">defaultLabelFormatters</span><span class="p">[</span><span class="nx">defaultOptions</span><span class="p">.</span><span class="nx">labelFormatter</span><span class="p">](</span><span class="nx">attrName</span><span class="p">,</span> <span class="nx">model</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Replaces nummeric placeholders like {0} in a string with arguments
passed to the function</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">format</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">),</span>
          <span class="nx">text</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\{(\d+)\}/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">args</span><span class="p">[</span><span class="nx">number</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="nx">args</span><span class="p">[</span><span class="nx">number</span><span class="p">]</span> <span class="o">:</span> <span class="nx">match</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Flattens an object
eg:</p>

<pre><code>var o = {
  address: {
    street: 'Street',
    zip: 1234
  }
};
</code></pre>

<p>becomes:</p>

<pre><code>var o = {
  'address.street': 'Street',
  'address.zip': 1234
};
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">flatten</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">into</span><span class="p">,</span> <span class="nx">prefix</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">into</span> <span class="o">=</span> <span class="nx">into</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">prefix</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">val</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">val</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">val</span> <span class="k">instanceof</span> <span class="nb">Date</span> <span class="o">||</span> <span class="nx">val</span> <span class="k">instanceof</span> <span class="nb">RegExp</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">flatten</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">into</span><span class="p">,</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="nx">into</span><span class="p">[</span><span class="nx">prefix</span> <span class="o">+</span> <span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="nx">into</span><span class="p">;</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h2>Validation</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">Validation</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Returns an object with undefined properties for all
attributes on the model that has defined one or more
validation rules.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">getValidatedAttrs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">validation</span> <span class="o">||</span> <span class="p">{}),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">memo</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="k">void</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">memo</span><span class="p">;</span>
      <span class="p">},</span> <span class="p">{});</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Looks on the model for validations for a specified
attribute. Returns an array of any validators defined,
or an empty array if none is defined.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">getValidators</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">attrValidationSet</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">validation</span> <span class="o">?</span> <span class="nx">model</span><span class="p">.</span><span class="nx">validation</span><span class="p">[</span><span class="nx">attr</span><span class="p">]</span> <span class="o">||</span> <span class="p">{}</span> <span class="o">:</span> <span class="p">{};</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>If the validator is a function or a string, wrap it in a function validator</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">attrValidationSet</span><span class="p">)</span> <span class="o">||</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">attrValidationSet</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">attrValidationSet</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">fn</span><span class="o">:</span> <span class="nx">attrValidationSet</span>
        <span class="p">};</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Stick the validator object into an array</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">attrValidationSet</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">attrValidationSet</span> <span class="o">=</span> <span class="p">[</span><span class="nx">attrValidationSet</span><span class="p">];</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Reduces the array of validators into a new array with objects
with a validation method to call, the value to validate against
and the specified error message, if any</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">attrValidationSet</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">attrValidation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">without</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">attrValidation</span><span class="p">),</span> <span class="s1">&#39;msg&#39;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">validator</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">memo</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="nx">fn</span><span class="o">:</span> <span class="nx">defaultValidators</span><span class="p">[</span><span class="nx">validator</span><span class="p">],</span>
            <span class="nx">val</span><span class="o">:</span> <span class="nx">attrValidation</span><span class="p">[</span><span class="nx">validator</span><span class="p">],</span>
            <span class="nx">msg</span><span class="o">:</span> <span class="nx">attrValidation</span><span class="p">.</span><span class="nx">msg</span>
          <span class="p">});</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">memo</span><span class="p">;</span>
      <span class="p">},</span> <span class="p">[]);</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Validates an attribute against all validators defined
for that attribute. If one or more errors are found,
the first error message is returned.
If the attribute is valid, an empty string is returned.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">validateAttr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">computed</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Reduces the array of validators to an error message by
applying all the validators and returning the first error
message, if any.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">getValidators</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">validator</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Pass the format functions plus the default
validators as the context to the validator</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">formatFunctions</span><span class="p">,</span> <span class="nx">defaultValidators</span><span class="p">),</span>
            <span class="nx">result</span> <span class="o">=</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">val</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">computed</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">result</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">memo</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">result</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">memo</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">msg</span> <span class="o">||</span> <span class="nx">result</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">memo</span><span class="p">;</span>
      <span class="p">},</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Loops through the model's attributes and validates them all.
Returns and object containing names of invalid attributes
as well as error messages.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">validateModel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">error</span><span class="p">,</span>
          <span class="nx">invalidAttrs</span> <span class="o">=</span> <span class="p">{},</span>
          <span class="nx">isValid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
          <span class="nx">computed</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">attrs</span><span class="p">),</span>
          <span class="nx">flattened</span> <span class="o">=</span> <span class="nx">flatten</span><span class="p">(</span><span class="nx">attrs</span><span class="p">);</span>

      <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">flattened</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">error</span> <span class="o">=</span> <span class="nx">validateAttr</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">computed</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">invalidAttrs</span><span class="p">[</span><span class="nx">attr</span><span class="p">]</span> <span class="o">=</span> <span class="nx">error</span><span class="p">;</span>
          <span class="nx">isValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">invalidAttrs</span><span class="o">:</span> <span class="nx">invalidAttrs</span><span class="p">,</span>
        <span class="nx">isValid</span><span class="o">:</span> <span class="nx">isValid</span>
      <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Contains the methods that are mixed in on the model when binding</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">mixin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Check whether or not a value passes validation
without updating the model</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">preValidate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">validateAttr</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">));</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Check to see if an attribute, an array of attributes or the
entire model is valid. Passing true will force a validation
of the model.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">isValid</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">flattened</span> <span class="o">=</span> <span class="nx">flatten</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">);</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">option</span><span class="p">)){</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">validateAttr</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">option</span><span class="p">,</span> <span class="nx">flattened</span><span class="p">[</span><span class="nx">option</span><span class="p">],</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">));</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">option</span><span class="p">)){</span>
            <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">option</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">memo</span><span class="p">,</span> <span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">memo</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">validateAttr</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">flattened</span><span class="p">[</span><span class="nx">attr</span><span class="p">],</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">));</span>
            <span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">option</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">validation</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isValid</span> <span class="o">:</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>This is called by Backbone when it needs to perform validation.
You can call it manually without any parameters to validate the
entire model.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">validate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attrs</span><span class="p">,</span> <span class="nx">setOptions</span><span class="p">){</span>
          <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
              <span class="nx">validateAll</span> <span class="o">=</span> <span class="o">!</span><span class="nx">attrs</span><span class="p">,</span>
              <span class="nx">opt</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">setOptions</span><span class="p">),</span>
              <span class="nx">validatedAttrs</span> <span class="o">=</span> <span class="nx">getValidatedAttrs</span><span class="p">(</span><span class="nx">model</span><span class="p">),</span>
              <span class="nx">allAttrs</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">validatedAttrs</span><span class="p">,</span> <span class="nx">model</span><span class="p">.</span><span class="nx">attributes</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">),</span>
              <span class="nx">changedAttrs</span> <span class="o">=</span> <span class="nx">flatten</span><span class="p">(</span><span class="nx">attrs</span> <span class="o">||</span> <span class="nx">allAttrs</span><span class="p">),</span>

              <span class="nx">result</span> <span class="o">=</span> <span class="nx">validateModel</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">allAttrs</span><span class="p">);</span>

          <span class="nx">model</span><span class="p">.</span><span class="nx">_isValid</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">isValid</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>After validation is performed, loop through all changed attributes
and call the valid callbacks so the view is updated.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">validatedAttrs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">attr</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">invalid</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">invalidAttrs</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">attr</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">invalid</span><span class="p">){</span>
              <span class="nx">opt</span><span class="p">.</span><span class="nx">valid</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">selector</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>After validation is performed, loop through all changed attributes
and call the invalid callback so the view is updated.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">validatedAttrs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">attr</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">invalid</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">invalidAttrs</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">attr</span><span class="p">),</span>
                <span class="nx">changed</span> <span class="o">=</span> <span class="nx">changedAttrs</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">attr</span><span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">invalid</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">changed</span> <span class="o">||</span> <span class="nx">validateAll</span><span class="p">)){</span>
              <span class="nx">opt</span><span class="p">.</span><span class="nx">invalid</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">invalidAttrs</span><span class="p">[</span><span class="nx">attr</span><span class="p">],</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">selector</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Trigger validated events.
Need to defer this so the model is actually updated before
the event is triggered.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">_</span><span class="p">.</span><span class="nx">defer</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">model</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;validated&#39;</span><span class="p">,</span> <span class="nx">model</span><span class="p">.</span><span class="nx">_isValid</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">invalidAttrs</span><span class="p">);</span>
            <span class="nx">model</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;validated:&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">_isValid</span> <span class="o">?</span> <span class="s1">&#39;valid&#39;</span> <span class="o">:</span> <span class="s1">&#39;invalid&#39;</span><span class="p">),</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">invalidAttrs</span><span class="p">);</span>
          <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Return any error messages to Backbone, unless the forceUpdate flag is set.
Then we do not return anything and fools Backbone to believe the validation was
a success. That way Backbone will update the model regardless.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">forceUpdate</span> <span class="o">&amp;&amp;</span> <span class="nx">_</span><span class="p">.</span><span class="nx">intersection</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">invalidAttrs</span><span class="p">),</span> <span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">changedAttrs</span><span class="p">)).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">invalidAttrs</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Helper to mix in validation on a model</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">bindModel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">mixin</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">options</span><span class="p">));</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Removes the methods added to a model</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">unbindModel</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">model</span><span class="p">.</span><span class="nx">validate</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">model</span><span class="p">.</span><span class="nx">preValidate</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">model</span><span class="p">.</span><span class="nx">isValid</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Mix in validation on a model whenever a model is
added to a collection</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">collectionAdd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">bindModel</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Remove validation from a model whenever a model is
removed from a collection</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">collectionRemove</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">unbindModel</span><span class="p">(</span><span class="nx">model</span><span class="p">);</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Returns the public methods on Backbone.Validation</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Current version of the library</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">version</span><span class="o">:</span> <span class="s1">&#39;0.7.1&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Called to configure the default options</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">configure</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">defaultOptions</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Hooks up validation on a view with a model
or collection</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">bind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">view</span><span class="p">.</span><span class="nx">model</span><span class="p">,</span>
            <span class="nx">collection</span> <span class="o">=</span> <span class="nx">view</span><span class="p">.</span><span class="nx">collection</span><span class="p">;</span>

        <span class="nx">options</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">defaultOptions</span><span class="p">,</span> <span class="nx">defaultCallbacks</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">model</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">collection</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">){</span>
          <span class="k">throw</span> <span class="s1">&#39;Before you execute the binding your view must have a model or a collection.\n&#39;</span> <span class="o">+</span>
                <span class="s1">&#39;See http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">bindModel</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">collection</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">){</span>
            <span class="nx">bindModel</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
          <span class="p">});</span>
          <span class="nx">collection</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="nx">collectionAdd</span><span class="p">,</span> <span class="p">{</span><span class="nx">view</span><span class="o">:</span> <span class="nx">view</span><span class="p">,</span> <span class="nx">options</span><span class="o">:</span> <span class="nx">options</span><span class="p">});</span>
          <span class="nx">collection</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="nx">collectionRemove</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Removes validation from a view with a model
or collection</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">unbind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">view</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">view</span><span class="p">.</span><span class="nx">model</span><span class="p">,</span>
            <span class="nx">collection</span> <span class="o">=</span> <span class="nx">view</span><span class="p">.</span><span class="nx">collection</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">unbindModel</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">model</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">collection</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">collection</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">){</span>
            <span class="nx">unbindModel</span><span class="p">(</span><span class="nx">model</span><span class="p">);</span>
          <span class="p">});</span>
          <span class="nx">collection</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span> <span class="nx">collectionAdd</span><span class="p">);</span>
          <span class="nx">collection</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s1">&#39;remove&#39;</span><span class="p">,</span> <span class="nx">collectionRemove</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Used to extend the Backbone.Model.prototype
with validation</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">mixin</span><span class="o">:</span> <span class="nx">mixin</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">defaultOptions</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="p">}());</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <h2>Callbacks</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">defaultCallbacks</span> <span class="o">=</span> <span class="nx">Validation</span><span class="p">.</span><span class="nx">callbacks</span> <span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Gets called when a previously invalid field in the
view becomes valid. Removes any error message.
Should be overridden with custom functionality.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">valid</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">view</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s1">&#39;~=&quot;&#39;</span> <span class="o">+</span> <span class="nx">attr</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;invalid&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;data-error&#39;</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Gets called when a field in the view becomes invalid.
Adds a error message.
Should be overridden with custom functionality.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">invalid</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">view</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s1">&#39;~=&quot;&#39;</span> <span class="o">+</span> <span class="nx">attr</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;invalid&#39;</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;data-error&#39;</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <h2>Patterns</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">defaultPatterns</span> <span class="o">=</span> <span class="nx">Validation</span><span class="p">.</span><span class="nx">patterns</span> <span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Matches any digit(s) (i.e. 0-9)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">digits</span><span class="o">:</span> <span class="sr">/^\d+$/</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Matched any number (e.g. 100.000)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">number</span><span class="o">:</span> <span class="sr">/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Matches a valid email address (e.g. mail@example.com)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">email</span><span class="o">:</span> <span class="sr">/^((([a-z]|\d|[!#\$%&amp;&#39;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&amp;&#39;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Mathes any valid url (e.g. http://www.xample.com)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">url</span><span class="o">:</span> <span class="sr">/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <h2>Error messages</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Error message for the build in validators.
{x} gets swapped out with arguments form the validator.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">defaultMessages</span> <span class="o">=</span> <span class="nx">Validation</span><span class="p">.</span><span class="nx">messages</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">required</span><span class="o">:</span> <span class="s1">&#39;{0} is required&#39;</span><span class="p">,</span>
    <span class="nx">acceptance</span><span class="o">:</span> <span class="s1">&#39;{0} must be accepted&#39;</span><span class="p">,</span>
    <span class="nx">min</span><span class="o">:</span> <span class="s1">&#39;{0} must be greater than or equal to {1}&#39;</span><span class="p">,</span>
    <span class="nx">max</span><span class="o">:</span> <span class="s1">&#39;{0} must be less than or equal to {1}&#39;</span><span class="p">,</span>
    <span class="nx">range</span><span class="o">:</span> <span class="s1">&#39;{0} must be between {1} and {2}&#39;</span><span class="p">,</span>
    <span class="nx">length</span><span class="o">:</span> <span class="s1">&#39;{0} must be {1} characters&#39;</span><span class="p">,</span>
    <span class="nx">minLength</span><span class="o">:</span> <span class="s1">&#39;{0} must be at least {1} characters&#39;</span><span class="p">,</span>
    <span class="nx">maxLength</span><span class="o">:</span> <span class="s1">&#39;{0} must be at most {1} characters&#39;</span><span class="p">,</span>
    <span class="nx">rangeLength</span><span class="o">:</span> <span class="s1">&#39;{0} must be between {1} and {2} characters&#39;</span><span class="p">,</span>
    <span class="nx">oneOf</span><span class="o">:</span> <span class="s1">&#39;{0} must be one of: {1}&#39;</span><span class="p">,</span>
    <span class="nx">equalTo</span><span class="o">:</span> <span class="s1">&#39;{0} must be the same as {1}&#39;</span><span class="p">,</span>
    <span class="nx">pattern</span><span class="o">:</span> <span class="s1">&#39;{0} must be a valid {1}&#39;</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <h2>Label formatters</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Label formatters are used to convert the attribute name
to a more human friendly label when using the built in
error messages.
Configure which one to use with a call to</p>

<pre><code>Backbone.Validation.configure({
  labelFormatter: 'label'
});
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">defaultLabelFormatters</span> <span class="o">=</span> <span class="nx">Validation</span><span class="p">.</span><span class="nx">labelFormatters</span> <span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Returns the attribute name with applying any formatting</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">none</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attrName</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">attrName</span><span class="p">;</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Converts attributeName or attribute_name to Attribute name</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">sentenceCase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attrName</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">attrName</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(?:^\w|[A-Z]|\b\w)/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">index</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">match</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">:</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="p">}).</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Looks for a label configured on the model and returns it</p>

<pre><code> var Model = Backbone.Model.extend({
   validation: {
     someAttribute: {
       required: true
     }
   },

   labels: {
     someAttribute: 'Custom label'
   }
 });
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">label</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attrName</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">labels</span> <span class="o">&amp;&amp;</span> <span class="nx">model</span><span class="p">.</span><span class="nx">labels</span><span class="p">[</span><span class="nx">attrName</span><span class="p">])</span> <span class="o">||</span> <span class="nx">defaultLabelFormatters</span><span class="p">.</span><span class="nx">sentenceCase</span><span class="p">(</span><span class="nx">attrName</span><span class="p">,</span> <span class="nx">model</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <h2>Built in validators</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">defaultValidators</span> <span class="o">=</span> <span class="nx">Validation</span><span class="p">.</span><span class="nx">validators</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Use native trim when defined</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">trim</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span> <span class="o">?</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">text</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
      <span class="p">}</span> <span class="o">:</span>
      <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">trimLeft</span> <span class="o">=</span> <span class="sr">/^\s+/</span><span class="p">,</span>
            <span class="nx">trimRight</span> <span class="o">=</span> <span class="sr">/\s+$/</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">text</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="nx">text</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="nx">trimLeft</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">trimRight</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
      <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Determines whether or not a value is a number</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">isNumber</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">defaultPatterns</span><span class="p">.</span><span class="nx">number</span><span class="p">));</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Determines whether or not not a value is empty</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">hasValue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isNull</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Function validator
Lets you implement a custom function used for validation</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">fn</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">computed</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">fn</span><span class="p">)){</span>
          <span class="nx">fn</span> <span class="o">=</span> <span class="nx">model</span><span class="p">[</span><span class="nx">fn</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">computed</span><span class="p">);</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Required validator
Validates if the attribute is required or not</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">required</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">required</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">computed</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">isRequired</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">required</span><span class="p">)</span> <span class="o">?</span> <span class="nx">required</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">computed</span><span class="p">)</span> <span class="o">:</span> <span class="nx">required</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isRequired</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasValue</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// overrides all other validators</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">isRequired</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasValue</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Acceptance validator
Validates that something has to be accepted, e.g. terms of use
<code>true</code> or 'true' are valid</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">acceptance</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">accept</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="s1">&#39;true&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isBoolean</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">acceptance</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Min validator
Validates that the value has to be a number and equal to or greater than
the min value specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">min</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">minValue</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">minValue</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">min</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">minValue</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>Max validator
Validates that the value has to be a number and equal to or less than
the max value specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">max</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">maxValue</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="nx">maxValue</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">max</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">maxValue</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Range validator
Validates that the value has to be a number and equal to or between
the two numbers specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">range</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">range</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>Length validator
Validates that the value has to be a string with length equal to
the length value specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">length</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasValue</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">length</span> <span class="o">!==</span> <span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">length</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>Min length validator
Validates that the value has to be a string with length equal to or greater than
the min length value specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">minLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">minLength</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasValue</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">minLength</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">minLength</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">minLength</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Max length validator
Validates that the value has to be a string with length equal to or less than
the max length value specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">maxLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">maxLength</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasValue</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">maxLength</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">maxLength</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>Range length validator
Validates that the value has to be a string and equal to or between
the two numbers specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">rangeLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">hasValue</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">rangeLength</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>One of validator
Validates that the value has to be equal to one of the elements in
the specified array. Case sensitive matching</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">oneOf</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">values</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">value</span><span class="p">)){</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">oneOf</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">values</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <p>Equal to validator
Validates that the value has to be equal to the value of the attribute
with the name specified</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">equalTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">equalTo</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">computed</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">computed</span><span class="p">[</span><span class="nx">equalTo</span><span class="p">])</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">equalTo</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">equalTo</span><span class="p">,</span> <span class="nx">model</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-67">&#182;</a>               </div>               <p>Pattern validator
Validates that the value has to match the pattern specified.
Can be a regular expression or the name of one of the built in patterns</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">pattern</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">pattern</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasValue</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="nx">defaultPatterns</span><span class="p">[</span><span class="nx">pattern</span><span class="p">]</span> <span class="o">||</span> <span class="nx">pattern</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">defaultMessages</span><span class="p">.</span><span class="nx">pattern</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatLabel</span><span class="p">(</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">model</span><span class="p">),</span> <span class="nx">pattern</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}());</span>

  <span class="k">return</span> <span class="nx">Validation</span><span class="p">;</span>
<span class="p">}(</span><span class="nx">_</span><span class="p">));</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html>